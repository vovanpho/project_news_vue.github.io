{"remainingRequest":"/Users/po/Documents/KITS/vue/project/ResfullAPI/newspaper/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/po/Documents/KITS/vue/project/ResfullAPI/newspaper/src/components/CompSearch.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/po/Documents/KITS/vue/project/ResfullAPI/newspaper/src/components/CompSearch.vue","mtime":1605172640888},{"path":"/Users/po/Documents/KITS/vue/project/ResfullAPI/newspaper/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/po/Documents/KITS/vue/project/ResfullAPI/newspaper/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/po/Documents/KITS/vue/project/ResfullAPI/newspaper/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/po/Documents/KITS/vue/project/ResfullAPI/newspaper/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb21wU2VhcmNoRm9jdXMgZnJvbSAiLi9Db21wU2VhcmNoRm9jdXMudnVlIgppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJDb21wU2VhcmNoIiwKICAgIGNvbXBvbmVudHM6ewogICAgICAgIENvbXBTZWFyY2hGb2N1cwogICAgfSwKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHF1ZXJ5OiAnJywKICAgICAgICAgICAgc2VhcmNoUmVzdWx0VmlzaWJsZTpmYWxzZSwKICAgICAgICAgICAgcG9zdHM6bnVsbCwKICAgICAgICAgICAgc2VhcmNoUmVzdWx0czpbXSwKICAgICAgICAgICAgaGlnaGxpZ2h0SW5kZXg6MCwKICAgICAgICAgICAgb3B0aW9uczp7CiAgICAgICAgICAgICAgICBzaG91bGRTb3J0OnRydWUsCiAgICAgICAgICAgICAgICBpbmNsdWRlTWF0Y2hlczp0cnVlLAogICAgICAgICAgICAgICAgdGhyZXNob2xkOjAuNSwKICAgICAgICAgICAgICAgIGxvY2F0aW9uOjAsCiAgICAgICAgICAgICAgICBkaXN0YW5jZTo1MDAsCiAgICAgICAgICAgICAgICBtYXhQYXR0ZXJuTGVuZ3RoOjMyLAogICAgICAgICAgICAgICAgbWluTWF0Y2hDaGFyTGVuZ3RoOjEsCiAgICAgICAgICAgICAgICBrZXlzOlsndGl0bGUnXQogICAgICAgICAgICB9CiAgICAgICAgICAgCiAgICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICBheGlvcy5nZXQoImh0dHA6Ly9uZXdzYXBpLm9yZy92Mi9ldmVyeXRoaW5nP3E9YXBwbGUmZnJvbT0yMDIwLTExLTAyJnRvPTIwMjAtMTEtMDImc29ydEJ5PXBvcHVsYXJpdHkmYXBpS2V5PTUwMmI4OGQ1YTVmNzQ4YzFhNGFmOGRkYmIzMDM3NGU4IikKICAgICAgICAgLnRoZW4oUmVzcG9uc2UgPT4ge3RoaXMucG9zdHM9UmVzcG9uc2UuZGF0YS5hcnRpY2xlc30pCiAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKCksICh0aGlzLmVycm9yZWQgPSB0cnVlKSkKICAgICAgICAgLmZpbmFsbHkoKCkgPT4gKHRoaXMubG9hZGluZyA9IGZhbHNlKSk7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIHJlc2V0KCl7CiAgICAgICAgICAgIHRoaXMucXVlcnk9JycKICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRJbmRleD0wCiAgICAgICAgfSwKICAgICAgICBzb2Z0UmVzZXQoKXsKICAgICAgICAgICAgdGhpcy5zZWFyY2hSZXN1bHRWaXNpYmxlPXRydWUKICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRJbmRleD0wCiAgICAgICAgfSwKICAgICAgIAogICAgICAgIGZvY3VzU2VhcmNoKGUpewogICAgICAgICAgICBpZihlLmtleT09PScvJyl7CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnNlYXJjaC5mb2N1cygpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHBlcmZvcm1TZWFyY2goKXsKICAgICAgICAgICAgdGhpcy4kc2VhcmNoKHRoaXMucXVlcnksIHRoaXMucG9zdHMsIHRoaXMub3B0aW9ucykKICAgICAgICAgICAgLnRoZW4ocmVzdWx0cyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFJlc3VsdHMgPSByZXN1bHRzCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBoaWdobGlnaHRQcmV2KCl7CiAgICAgICAgICAgIGlmKHRoaXMuaGlnaGxpZ2h0SW5kZXg+MCl7CiAgICAgICAgICAgICAgICB0aGlzLmhpZ2hsaWdodEluZGV4PXRoaXMuaGlnaGxpZ2h0SW5kZXgtMQogICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxJbnRvVmlldygpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGhpZ2hsaWdodE5leHQoKXsKICAgICAgICAgICAgaWYodGhpcy5oaWdobGlnaHRJbmRleDx0aGlzLnNlYXJjaFJlc3VsdHMubGVuZ3RoLTEpewogICAgICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRJbmRleD10aGlzLmhpZ2hsaWdodEluZGV4KzEKICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsSW50b1ZpZXcoKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzY3JvbGxJbnRvVmlldygpewogICAgICAgICAgICB0aGlzLiRyZWZzLnJlc3VsdHMuY2hpbGRyZW5bdGhpcy5oaWdobGlnaHRJbmRleF0uc2Nyb2xsSW50b1ZpZXcoe2Jsb2NrOiduZWFyZXN0J30pCiAgICAgICAgfSwKICAgICAgICBnb3RvbGluaygpewogICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hSZXN1bHRzW3RoaXMuaGlnaGxpZ2h0SW5kZXhdKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb249dGhpcy5zZWFyY2hSZXN1bHRzW3RoaXMuaGlnaGxpZ2h0SW5kZXhdCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["CompSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"CompSearch.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"permanent\">\n        <form class=\"formInline mlauto\">\n            <comp-search-focus @keyup=\"focusSearch\"/>\n            <div class=\"mdform my0\">\n                <input class=\"formControl\" type=\"text\" placeholder=\"Search\" v-model=\"query\" \n                @blur=\"searchResultVisible=false\"\n                @focus=\"searchResultVisible=true\"\n                @keydown.esc=\"searchResultVisible=false\"\n                @input=\"softReset\"\n                ref=\"search\"\n                @keyup=\"performSearch\"\n                @keydown.up.prevent=\"highlightPrev\"\n                @keydown.down.prevent=\"highlightNext\"\n                @keydown.enter=\"gotolink\"\n                />\n            </div>\n            <button href=\"#\" class=\"btn btnmd\" type=\"submit\"><fontAwesomeIcon :icon=\"['fas', 'search']\" /></button>\n            <div class=\"closeSearch\" v-if=\"query.length>0\" @click=\"reset\"><fontAwesomeIcon :icon=\"['fas', 'times']\"/></div>\n        </form>\n        <div class=\"viewResult\" v-if=\"query.length>0 && searchResultVisible\">\n            <ul class=\"flexCol\" ref=\"results\">\n                <li v-for=\"(post, index) in searchResults\" \n                :key=\"index\"  \n                @mousedown.prevent ='searchResultVisible=true'\n                :class=\"{ 'bgcolor': index === highlightIndex }\"\n                >\n                    <router-link :to=\"{name:'ViewPage', params:{id: index}}\">\n                        <div>{{post.item.title}}</div> \n                    </router-link>\n                </li>\n            </ul>\n            <div v-if=\"searchResults.length==0\" ><p>No resutl for \"<strong>{{query}}</strong>\"</p></div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport CompSearchFocus from \"./CompSearchFocus.vue\"\nimport axios from \"axios\"\nexport default {\n    name: \"CompSearch\",\n    components:{\n        CompSearchFocus\n    },\n    data(){\n        return{\n            query: '',\n            searchResultVisible:false,\n            posts:null,\n            searchResults:[],\n            highlightIndex:0,\n            options:{\n                shouldSort:true,\n                includeMatches:true,\n                threshold:0.5,\n                location:0,\n                distance:500,\n                maxPatternLength:32,\n                minMatchCharLength:1,\n                keys:['title']\n            }\n           \n        }\n    },\n    created() {\n    axios.get(\"http://newsapi.org/v2/everything?q=apple&from=2020-11-02&to=2020-11-02&sortBy=popularity&apiKey=502b88d5a5f748c1a4af8ddbb30374e8\")\n         .then(Response => {this.posts=Response.data.articles})\n         .catch(console.error(), (this.errored = true))\n         .finally(() => (this.loading = false));\n    },\n    methods: {\n        reset(){\n            this.query=''\n            this.highlightIndex=0\n        },\n        softReset(){\n            this.searchResultVisible=true\n            this.highlightIndex=0\n        },\n       \n        focusSearch(e){\n            if(e.key==='/'){\n                this.$refs.search.focus()\n            }\n        },\n        performSearch(){\n            this.$search(this.query, this.posts, this.options)\n            .then(results => {\n                this.searchResults = results\n            })\n        },\n        highlightPrev(){\n            if(this.highlightIndex>0){\n                this.highlightIndex=this.highlightIndex-1\n                this.scrollIntoView()\n            }\n        },\n        highlightNext(){\n            if(this.highlightIndex<this.searchResults.length-1){\n                this.highlightIndex=this.highlightIndex+1\n                this.scrollIntoView()\n            }\n        },\n        scrollIntoView(){\n            this.$refs.results.children[this.highlightIndex].scrollIntoView({block:'nearest'})\n        },\n        gotolink(){\n            if (this.searchResults[this.highlightIndex]) {\n                window.location=this.searchResults[this.highlightIndex]\n            }\n            \n        }\n    }\n}\n</script>\n\n<style>\n/* https://www.youtube.com/watch?v=6i8D8j5Gkk8     */\n    .permanent{\n        position: relative;\n    }\n\n    .permanent .formInline{\n        border: 1px soild;\n        position: relative;\n    } \n        \n        .formControl{\n            width: 100%;\n            box-sizing: border-box;\n            height: 2rem;\n            padding: 0 2rem;\n        }\n        .btn.btnmd{\n            position: absolute;\n            top: 0;\n            padding: 6px;\n        }\n        \n        .closeSearch{\n            position: absolute;\n            top: 0px;\n            right: 0;\n            padding: 6px;\n        }\n    .permanent .viewResult{\n        max-height: 10rem;\n        z-index: 20;\n        background-color: rgb(252, 252, 252);\n        overflow: hidden;\n        overflow-y:auto;\n        position:absolute;\n        right: 0;\n    }\n    .flexCol{\n        border: 1px solid;\n    }\n    li.bgcolor{\n            background-color: rgb(167, 187, 243);\n    }\n</style>"]}]}